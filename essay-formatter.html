<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Essay Formatter - Parker Beard</title>
    <style>
        :root {
            --bg-color: #f0efea;
            --text-color: #141413;
            --primary-color: #141413;
            --border-color: #e6e4dd;
            --success-color: #48bb78;
            --error-color: #e53e3e;
            --font-family: 'Newsreader', serif;
        }

        .dark-mode {
            --bg-color: #141413;
            --text-color: #f0efea;
            --border-color: #333;
        }

        body {
            font-family: var(--font-family);
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        h1 {
            font-size: 2em;
            text-align: center;
            grid-column: 1 / -1;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
            box-sizing: border-box;
        }

        textarea {
            min-height: 300px;
            resize: vertical;
        }

        button {
            background-color: transparent;
            color: var(--text-color);
            border: 1px solid var(--text-color);
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            font-family: var(--font-family);
            transition: all 0.3s;
        }

        button:hover {
            background-color: var(--text-color);
            color: var(--bg-color);
        }

        .output {
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 10px;
            min-height: 300px;
            white-space: pre-wrap;
            background-color: white;
            overflow: auto;
        }

        .preview {
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 40px;
            min-height: 300px;
            background-color: var(--bg-color);
            overflow: auto;
            max-width: 700px;
            margin: 0 auto;
        }
        
        /* Preview styles to match actual site */
        .preview h1 {
            font-size: 2.25rem;
            line-height: 1.2;
            margin: 2rem 0 1rem;
            font-weight: 500;
        }
        
        .preview h2 {
            font-size: 1.875rem;
            margin: 2.5rem 0 1rem;
            font-weight: 500;
        }
        
        .preview h3 {
            font-size: 1.5rem;
            margin: 2rem 0 0.75rem;
            font-weight: 500;
        }
        
        .preview h4 {
            font-size: 1.125rem;
            margin: 1.5rem 0 0.5rem;
            font-weight: 500;
            opacity: 0.8;
        }
        
        .preview p {
            margin: 1.25rem 0;
            line-height: 1.75;
        }
        
        .preview .author-date {
            font-size: 0.95rem;
            opacity: 0.7;
            margin: 1rem 0 2rem;
        }
        
        .preview .read-time {
            margin-left: 0.5rem;
        }
        
        .preview .read-time:before {
            content: "· ";
        }
        
        .preview a {
            color: var(--text-color);
            text-decoration: none;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1px;
            transition: border-color 0.3s;
        }
        
        .preview a:hover {
            border-color: var(--text-color);
        }
        
        .preview .footnote-ref {
            border: none;
            font-size: 0.85em;
        }
        
        .preview .footnotes {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            font-size: 0.9rem;
        }
        
        .preview .footnotes ol {
            padding-left: 1.5rem;
        }
        
        .preview .footnotes li {
            margin-bottom: 0.75rem;
        }
        
        .preview .footnote-backref {
            margin-left: 0.5rem;
            font-size: 0.9em;
            border: none;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .message {
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            display: none;
        }

        .success {
            background-color: var(--success-color);
            color: white;
        }

        .error {
            background-color: var(--error-color);
            color: white;
        }

        .template-info {
            grid-column: 1 / -1;
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }

        .tabs {
            display: flex;
            grid-column: 1 / -1;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid var(--border-color);
            background-color: #f8f9fa;
            border-radius: 4px 4px 0 0;
            margin-right: 5px;
        }

        .tab.active {
            background-color: white;
            border-bottom: 1px solid white;
        }

        .tab-content {
            display: none;
            grid-column: 1 / -1;
        }

        .tab-content.active {
            display: block;
        }
        
        .output-section {
            grid-column: 1 / -1;
            margin-top: 20px;
        }
        
        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .view-toggle {
            display: flex;
            gap: 5px;
        }
        
        .view-btn {
            padding: 5px 15px;
            font-size: 0.9em;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .view-btn.active {
            background-color: var(--text-color);
            color: var(--bg-color);
            border-color: var(--text-color);
        }
        
        .view-btn:hover:not(.active) {
            border-color: var(--text-color);
        }
        
        .output-container {
            position: relative;
            min-height: 400px;
        }
        
        .output-container .output,
        .output-container .preview {
            display: none;
        }
        
        .output-container .output.active,
        .output-container .preview.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Essay Formatter</h1>

        <div class="tabs">
            <div class="tab active" data-tab="convert">Convert Essay</div>
            <div class="tab" data-tab="template">Template Info</div>
            <div class="tab" data-tab="help">Help</div>
        </div>

        <div class="tab-content active" id="convert-tab">
            <div class="form-group">
                <label for="essayTitle">Essay Title:</label>
                <input type="text" id="essayTitle" placeholder="Enter your essay title here">
            </div>

            <div class="form-group">
                <label for="essaySubtitle">Essay Subtitle (optional):</label>
                <input type="text" id="essaySubtitle" placeholder="Enter a subtitle if needed">
            </div>

            <div class="form-group">
                <label for="essayExcerpt">Essay Excerpt (for homepage):</label>
                <input type="text" id="essayExcerpt" placeholder="A brief description for the homepage listing">
            </div>

            <div class="form-group">
                <label for="essayDate">Publication Date:</label>
                <input type="date" id="essayDate">
            </div>

            <div class="form-group">
                <label for="essaySlug">URL Slug:</label>
                <input type="text" id="essaySlug" placeholder="essay-url-slug (e.g., my-essay-title)">
            </div>

            <div class="form-group">
                <label for="essayKeywords">SEO Keywords (comma-separated):</label>
                <input type="text" id="essayKeywords" placeholder="america, freedom, philosophy, etc.">
            </div>

            <div class="form-group">
                <label for="essayContent">Paste your Google Docs essay here:</label>
                <textarea id="essayContent" placeholder="Paste your essay content from Google Docs here"></textarea>
            </div>

            <div class="controls">
                <button id="formatButton">Format to HTML</button>
                <button id="copyButton">Copy HTML</button>
                <button id="downloadButton">Download HTML File</button>
                <button id="generateFullHTML">Generate Full Page</button>
            </div>

            <div id="message" class="message"></div>

            <div class="output-section">
                <div class="output-header">
                    <h2>Output</h2>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="html">HTML</button>
                        <button class="view-btn" data-view="preview">Preview</button>
                    </div>
                </div>
                <div class="output-container">
                    <div class="output active" id="htmlOutput"></div>
                    <div class="preview" id="previewOutput"></div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="template-tab">
            <div class="template-info">
                <h2>About the Template</h2>
                <p>This tool helps you format your essays into HTML that matches your website template. The generated HTML will include:</p>
                <ul>
                    <li>Properly formatted paragraphs</li>
                    <li>Title and subtitle</li>
                    <li>Publication date with automatic reading time</li>
                    <li>Basic formatting (italics, bold)</li>
                    <li>Footnotes support (use [^1] in text and [^1]: for footnote content)</li>
                    <li>SEO meta tags and Open Graph tags</li>
                    <li>Automatic dark mode support</li>
                </ul>
                <p>You can use this tool in two ways:</p>
                <ol>
                    <li><strong>Format Content Only:</strong> Use the "Format to HTML" button to generate just the essay content HTML.</li>
                    <li><strong>Generate Full Page:</strong> Use the "Generate Full Page" button to create a complete HTML page based on the template.</li>
                </ol>
                <p>To use the full page template:</p>
                <ol>
                    <li>Enter all required fields (title, subtitle, and URL slug)</li>
                    <li>Select your publication date from the date picker</li>
                    <li>Paste your essay content</li>
                    <li>Click "Generate Full Page"</li>
                    <li>Download the generated HTML file</li>
                    <li>Save the file with an appropriate name (e.g., my-essay.html)</li>
                </ol>
            </div>
        </div>

        <div class="tab-content" id="help-tab">
            <div class="template-info">
                <h2>How to Use This Tool</h2>
                <ol>
                    <li><strong>Copy from Google Docs:</strong> Select all content in your Google Docs essay and copy it (Ctrl+C or Command+C)</li>
                    <li><strong>Fill out the form:</strong> Enter your essay title, subtitle (if any), and select a publication date</li>
                    <li><strong>Paste content:</strong> Paste your copied essay into the textarea</li>
                    <li><strong>Format to HTML:</strong> Click the "Format to HTML" button</li>
                    <li><strong>Review the preview:</strong> Check that the formatting looks correct</li>
                    <li><strong>Copy or download:</strong> Use the buttons to copy the HTML or download it as a file</li>
                </ol>

                <h3>Tips for Best Results</h3>
                <ul>
                    <li>Make sure your Google Doc uses standard paragraph formatting</li>
                    <li>The tool will preserve basic formatting like <em>italics</em> and <strong>bold</strong></li>
                    <li>If you have complex formatting or special elements, you may need to adjust the HTML manually</li>
                </ul>

                <h3>For Section Headers</h3>
                <p>Use Markdown-style heading syntax for section titles:</p>
                <ul>
                    <li><code>## Section Title</code> - Creates an H2 heading</li>
                    <li><code>### Subsection Title</code> - Creates an H3 heading</li>
                    <li><code>#### Minor Section</code> - Creates an H4 heading</li>
                </ul>
                <p>For example, to create a section like "II. The First Cut" in your essay, format it as:</p>
                <pre>## II. The First Cut</pre>
                <p>Make sure to put section headers on their own lines, separated from paragraphs.</p>

                <h3>Text Formatting</h3>
                <p>You can use these Markdown-style formats in your text:</p>
                <ul>
                    <li><code>*text*</code> or <code>_text_</code> - Makes text <i>italic</i></li>
                    <li><code>**text**</code> or <code>__text__</code> - Makes text <strong>bold</strong></li>
                    <li><code>[^1]</code> - Creates a footnote reference</li>
                    <li><code>[^1]: Footnote text</code> - Defines the footnote content (place at end of essay)</li>
                </ul>
                <p>For example: "This is <code>*italic*</code> and this is <code>**bold**</code>" becomes "This is <i>italic</i> and this is <strong>bold</strong>"</p>
                
                <h3>Footnotes</h3>
                <p>To add footnotes:</p>
                <ol>
                    <li>Add <code>[^1]</code> in your text where you want the footnote reference</li>
                    <li>At the end of your essay, add <code>[^1]: Your footnote text here</code></li>
                    <li>Number footnotes sequentially: [^1], [^2], [^3], etc.</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab functionality
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    
                    // Update active tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Show active content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                });
            });

            // Set today's date as default
            const today = new Date();
            const formattedDate = today.toISOString().substring(0, 10);
            document.getElementById('essayDate').value = formattedDate;

            // Auto-generate slug from title
            const titleInput = document.getElementById('essayTitle');
            const slugInput = document.getElementById('essaySlug');
            
            titleInput.addEventListener('input', function() {
                // Only auto-generate if slug is empty or matches previous auto-generated slug
                const currentSlug = slugInput.value;
                const autoSlug = generateSlug(this.value);
                
                if (!currentSlug || currentSlug === generateSlug(titleInput.dataset.previousTitle || '')) {
                    slugInput.value = autoSlug;
                }
                
                titleInput.dataset.previousTitle = this.value;
            });

            // Format button click handler
            document.getElementById('formatButton').addEventListener('click', formatEssay);
            
            // Copy button click handler
            document.getElementById('copyButton').addEventListener('click', copyToClipboard);
            
            // Download button click handler
            document.getElementById('downloadButton').addEventListener('click', downloadHTML);
            
            // Generate Full HTML button click handler
            document.getElementById('generateFullHTML').addEventListener('click', generateFullHTML);
            
            // View toggle functionality
            const viewButtons = document.querySelectorAll('.view-btn');
            const htmlOutput = document.getElementById('htmlOutput');
            const previewOutput = document.getElementById('previewOutput');
            
            viewButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Update active button
                    viewButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show appropriate view
                    const view = this.getAttribute('data-view');
                    if (view === 'html') {
                        htmlOutput.classList.add('active');
                        previewOutput.classList.remove('active');
                    } else {
                        htmlOutput.classList.remove('active');
                        previewOutput.classList.add('active');
                    }
                });
            });
        });

        function generateSlug(text) {
            return text
                .toLowerCase()
                .trim()
                .replace(/[^\w\s-]/g, '') // Remove special characters
                .replace(/\s+/g, '-')      // Replace spaces with hyphens
                .replace(/-+/g, '-')       // Replace multiple hyphens with single hyphen
                .replace(/^-+/, '')        // Remove leading hyphens
                .replace(/-+$/, '');       // Remove trailing hyphens
        }

        function formatEssay() {
            const title = document.getElementById('essayTitle').value.trim();
            const subtitle = document.getElementById('essaySubtitle').value.trim();
            const dateInput = document.getElementById('essayDate').value;
            const content = document.getElementById('essayContent').value;
            
            if (!title) {
                showMessage('Please enter an essay title', 'error');
                return;
            }
            
            if (!content) {
                showMessage('Please paste your essay content', 'error');
                return;
            }

            // Format the date
            const date = new Date(dateInput);
            const formattedDate = formatDate(date);
            
            // Separate footnote definitions from main content
            const lines = content.split('\n');
            const mainContent = [];
            const footnotes = {};
            let isFootnoteSection = false;
            
            for (const line of lines) {
                // Check if this is a footnote definition
                const footnoteDefMatch = line.match(/^\[\^(\d+)\]:\s*(.+)$/);
                
                if (footnoteDefMatch) {
                    isFootnoteSection = true;
                    const footnoteNum = footnoteDefMatch[1];
                    const footnoteText = footnoteDefMatch[2];
                    footnotes[footnoteNum] = footnoteText;
                } else if (line.trim() !== '' && !isFootnoteSection) {
                    mainContent.push(line);
                } else if (line.trim() !== '' && isFootnoteSection) {
                    // This is continuation of a footnote
                    const lastFootnoteNum = Object.keys(footnotes).pop();
                    if (lastFootnoteNum) {
                        footnotes[lastFootnoteNum] += ' ' + line.trim();
                    }
                }
            }
            
            // Process content - split into paragraphs and format
            const paragraphs = mainContent.join('\n').split(/\n+/).filter(p => p.trim() !== '');
            
            // Generate HTML
            let htmlOutput = `<h1>${escapeHTML(title)}</h1>\n`;
            
            if (subtitle) {
                htmlOutput += `<h4>${escapeHTML(subtitle)}</h4>\n`;
            }
            
            htmlOutput += `<p class="author-date">\n    <time datetime="${dateInput}">${formattedDate}</time>\n    <span class="read-time"></span>\n</p>\n\n`;
            
            // Add paragraphs
            paragraphs.forEach(paragraph => {
                const trimmedParagraph = paragraph.trim();
                
                // Check if this is a section header (matches ## Title pattern)
                const headerMatch = trimmedParagraph.match(/^(#{2,6})\s+(.+)$/);
                
                if (headerMatch) {
                    // It's a heading - determine the level (h2, h3, etc.)
                    const headerLevel = headerMatch[1].length;
                    const headerText = headerMatch[2].trim();
                    htmlOutput += `<h${headerLevel}>${formatParagraphContent(headerText, footnotes)}</h${headerLevel}>\n`;
                } else {
                    // Regular paragraph
                    const formattedParagraph = formatParagraphContent(trimmedParagraph, footnotes);
                    htmlOutput += `<p>\n    ${formattedParagraph}\n</p>\n`;
                }
            });
            
            // Add footnotes section if there are any
            if (Object.keys(footnotes).length > 0) {
                htmlOutput += '\n<div class="footnotes">\n    <ol>\n';
                for (const [num, text] of Object.entries(footnotes)) {
                    htmlOutput += `        <li id="fn-${num}">\n            ${escapeHTML(text)} <a href="#fnref-${num}" class="footnote-backref">↩</a>\n        </li>\n`;
                }
                htmlOutput += '    </ol>\n</div>\n';
            }
            
            // Display HTML
            const htmlOutputEl = document.getElementById('htmlOutput');
            const previewOutputEl = document.getElementById('previewOutput');
            
            htmlOutputEl.textContent = htmlOutput;
            previewOutputEl.innerHTML = htmlOutput;
            
            // Calculate and show reading time in preview
            const wordCount = content.trim().split(/\s+/).filter(word => word.length > 0).length;
            const readingTime = Math.ceil(wordCount / 225);
            const readTimeEl = previewOutputEl.querySelector('.read-time');
            if (readTimeEl) {
                readTimeEl.textContent = `${readingTime} min read`;
            }
            
            showMessage('HTML formatted successfully!', 'success');
        }

        function formatParagraphContent(paragraph, footnotes) {
            // Handle basic formatting
            
            // First, escape any HTML to prevent injection
            let formatted = escapeHTML(paragraph);
            
            // Convert footnote references [^1] to superscript links
            formatted = formatted.replace(/\[\^(\d+)\]/g, function(match, num) {
                if (footnotes && footnotes[num]) {
                    return `<sup><a href="#fn-${num}" id="fnref-${num}" class="footnote-ref">${num}</a></sup>`;
                }
                return match;
            });
            
            // Convert **text** to <strong>text</strong> (double asterisks for bold) - Non-greedy
            formatted = formatted.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            
            // Convert __text__ to <strong>text</strong> (double underscores for bold) - Non-greedy
            formatted = formatted.replace(/__(.+?)__/g, '<strong>$1</strong>');
            
            // Convert *text* to <i>text</i> (single asterisks for italics) - Non-greedy
            formatted = formatted.replace(/\*(.+?)\*/g, '<i>$1</i>');
            
            // Convert _text_ to <i>text</i> (underscores for italics) - Non-greedy
            formatted = formatted.replace(/_(.+?)_/g, '<i>$1</i>');
            
            return formatted;
        }

        function formatDate(date) {
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June', 
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            
            const day = date.getDate();
            const month = months[date.getMonth()];
            const year = date.getFullYear();
            
            return `${day} ${month} ${year}`;
        }

        function escapeHTML(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function copyToClipboard() {
            const htmlOutput = document.getElementById('htmlOutput');
            
            if (!htmlOutput.textContent.trim()) {
                showMessage('Nothing to copy. Format your essay first.', 'error');
                return;
            }
            
            navigator.clipboard.writeText(htmlOutput.textContent)
                .then(() => {
                    showMessage('HTML copied to clipboard!', 'success');
                })
                .catch(err => {
                    showMessage('Failed to copy: ' + err, 'error');
                    console.error('Failed to copy: ', err);
                });
        }

        function downloadHTML() {
            const htmlOutput = document.getElementById('htmlOutput').textContent;
            
            if (!htmlOutput.trim()) {
                showMessage('Nothing to download. Format your essay first.', 'error');
                return;
            }
            
            const title = document.getElementById('essayTitle').value.trim();
            const fileName = title.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '') + '.html';
            
            const blob = new Blob([htmlOutput], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            a.click();
            
            URL.revokeObjectURL(url);
            showMessage(`Downloaded as ${fileName}`, 'success');
        }

        function generateFullHTML() {
            const title = document.getElementById('essayTitle').value.trim();
            const subtitle = document.getElementById('essaySubtitle').value.trim();
            const excerpt = document.getElementById('essayExcerpt').value.trim();
            const keywords = document.getElementById('essayKeywords').value.trim();
            const slug = document.getElementById('essaySlug').value.trim() || title.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
            const dateInput = document.getElementById('essayDate').value;
            
            if (!title) {
                showMessage('Please enter an essay title', 'error');
                return;
            }
            
            if (!subtitle) {
                showMessage('Please enter an essay subtitle', 'error');
                return;
            }
            
            if (!excerpt) {
                showMessage('Please enter an excerpt for the homepage', 'error');
                return;
            }
            
            // Format the essay first to include the selected date
            formatEssay();
            
            const contentHTML = document.getElementById('htmlOutput').textContent;
            
            if (!contentHTML) {
                showMessage('Failed to format essay content', 'error');
                return;
            }
            
            // Fetch the template
            fetch('template.html')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Template not found. Please make sure template.html exists in the same directory.');
                    }
                    return response.text();
                })
                .then(template => {
                    // Replace placeholders
                    let fullHTML = template;
                    fullHTML = fullHTML.replace(new RegExp("<!-- ESSAY_TITLE -->", "g"), escapeHTML(title));
                    fullHTML = fullHTML.replace(new RegExp("<!-- ESSAY_SUBTITLE -->", "g"), escapeHTML(subtitle));
                    fullHTML = fullHTML.replace(new RegExp("<!-- ESSAY_SLUG -->", "g"), slug);
                    fullHTML = fullHTML.replace(new RegExp("<!-- ESSAY_CONTENT -->", "g"), contentHTML);
                    
                    // Add meta description using excerpt
                    const metaDescription = `<meta name="description" content="${escapeHTML(excerpt)}" />`;
                    fullHTML = fullHTML.replace('</title>', `</title>\n    ${metaDescription}`);
                    
                    // Add keywords if provided
                    if (keywords) {
                        const metaKeywords = `<meta name="keywords" content="${escapeHTML(keywords)}" />`;
                        fullHTML = fullHTML.replace('</title>', `</title>\n    ${metaKeywords}`);
                    }
                    
                    // Display the full HTML
                    document.getElementById('htmlOutput').textContent = fullHTML;
                    
                    // Also provide index.html entry
                    const date = new Date(dateInput);
                    const formattedDate = formatDate(date);
                    const indexEntry = `
                        <div class="essay-item">
                            <div class="essay-title">
                                <a href="${slug}.html">${escapeHTML(title)}</a>
                            </div>
                            <span class="essay-date">${formattedDate} · [READING TIME] min read</span>
                            <p class="essay-excerpt">${escapeHTML(excerpt)}</p>
                        </div>`;
                    
                    showMessage('Full HTML page generated successfully! Index entry copied below.', 'success');
                    console.log('Add this to your index.html:', indexEntry);
                })
                .catch(error => {
                    showMessage(error.message, 'error');
                    console.error('Error:', error);
                });
        }

        function showMessage(text, type) {
            const messageElement = document.getElementById('message');
            messageElement.textContent = text;
            messageElement.className = 'message ' + type;
            messageElement.style.display = 'block';
            
            setTimeout(() => {
                messageElement.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html> 